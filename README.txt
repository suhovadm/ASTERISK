Примеры различных настроек по IP-телефонии...
--------------------------------------------------------------------------------------------
Какие бывают готовые сборки?
1. Sangoma Linux + Asterisk + freePBX.
2. MikoPBX.
3. Когда-то давно был ещё Elastix, но на данный момент проект заброшен.
Последняя стабильная версия датируется аж 2016 годом.
--------------------------------------------------------------------------------------------
Шаблон по системным требованиям и свободному месту для установки Debian 12 + Asterisk 20+

~ 100 пользователей | ~ 10-20 одновременных звонков | 2 ядра | 2 гига ОЗУ.
~ 200 пользователей | ~ 20-40 одновременных звонков | 4 ядра | 4 гига ОЗУ.
~ 300 пользователей | ~ 30-60 одновременных звонков | 4 ядра | 8 гигов ОЗУ.
~ 400 пользователей | ~ 40-80 одновременных звонков | 6 ядер | 12 гигов ОЗУ.
~ 500 пользователей | ~ 100 одновременных звонков | 8 ядер | 16 гигов ОЗУ.
--------------------------------------------------------------------------------------------
Кодеки:

G.711 (ulaw/alaw) - высокое качество звука, сильная нагрузка на процессор и сеть. Самые поддерживаемые везде.
opus - современный бесплатный HD-кодек.
G.722 - HD-звук. Бесплатный. Современный кодек для звонков и конференций. Оптимизирован для нагрузки сети и железа.
G.726 - устаревший кодек, но широко поддерживается. Для старых телефонов, короч.
GSM - низкое качество звука, низкая нагрузка на всё. Бесплатный.
G.729 - высокое качество звука. Требует лицензии и оплаты. Сильно нагружает проц. Чаще всего выключен.
disallow = all - обязательно идёт после всех кодеков, а не над ними. То есть, выключаем все остальные кодеки.
--------------------------------------------------------------------------------------------
HDD:
Сам Debian 12 + Asterisk 20+ в общей сложности примерно 20 гб. Лучше ставить на SSD для скорости и отзывчивости системы.
Debian 12: ~ 4Gb
Asterisk 20: ~ 2 Gb
Апдейты/логи/свап/кэш и пр. : 14-15 Gb

~ 50 звонков в день по 3 мин. каждый в кодеке G.711 (ulaw/alaw) = ~ 88 mb
~ 100 звонков в день по 5 мин. каждый в кодеке G.711 (ulaw/alaw) = ~ 488 mb
~ 200 звонков в день по 5 мин. каждый в кодеке G.711 (ulaw/alaw) = ~ 977 mb
~ 300 звонков в день по 5 мин. каждый в кодеке G.711 (ulaw/alaw) = ~ 1,4 Gb

Голосовая почта (Voicemail).
Обычно занимает не так много места, как записи, но тоже требует учета. Одно сообщение длиной 1 минута в G.711 весит ~0.6 mb.

Под это дело нужно выработать некий алгоритм, скажем, записи звонков и голосовая почта хранятся 3 месяца (90 дней), потом удаляются.
Обычно, систему ставят на SSD, а записи звонков и голосовую почту складывают на отдельный SATA/SAS HDD.
--------------------------------------------------------------------------------------------
Пример сборки для 300 пользователей (средняя нагрузка):

CPU: 4 ядра (Xeon E3 или аналогичный Ryzen)
ОЗУ: 8 ГБ DDR4
Диск 1 (Система): SSD 128 ГБ (это с запасом)
Диск 2 (Записи): HDD 1 ТБ (и это с запасом)
Сеть: Гигабитный канал с выделенным IP-адресом.
